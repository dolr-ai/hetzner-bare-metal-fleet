#!/bin/bash
# Post-checkout hook to automatically run setup tasks
# This hook runs after git checkout or git clone

# Only run on branch checkouts, not file checkouts
# $3 is 1 for branch checkout, 0 for file checkout
if [ "$3" == "1" ]; then
    echo "Setting up repository hooks..."
    
    SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
    
    # Check if core.hooksPath is already configured
    HOOKS_PATH=$(git config --local core.hooksPath 2>/dev/null || echo "")
    
    if [ -z "$HOOKS_PATH" ]; then
        # Run the install script
        if [ -f "$SCRIPT_DIR/install-hooks.sh" ]; then
            bash "$SCRIPT_DIR/install-hooks.sh"
        fi
    fi
fi
